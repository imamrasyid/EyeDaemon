# Discord Bot Configuration
# Required: Get your bot token from https://discord.com/developers/applications
DISCORD_TOKEN=your_bot_token_here

# Required: Your bot's client ID (Application ID)
DISCORD_CLIENT_ID=your_client_id_here

# Command prefix (default: !)
DISCORD_PREFIX=!

# Optional: Guild ID for development/testing
DISCORD_GUILD_ID=your_guild_id_here

# DJ role name for music control permissions
DISCORD_DJ_ROLE=DJ

# Comma-separated list of channels where music commands are allowed (empty = all channels)
DISCORD_MUSIC_CHANNELS=music-bot,music,general

# Path to music queue persistence database
DISCORD_CACHE_PATH=./src/bot/data/music.db

# Audio Configuration
# Audio streaming server endpoint (required for music feature)
DISCORD_AUDIO_SOURCE_ENDPOINT=http://localhost:3000
AUDIO_SOURCE_PORT=3000

# Volume settings (0-200, default: 80)
AUDIO_VOLUME_DEFAULT=80
AUDIO_VOLUME_MAX=200

# Audio quality (bitrate in bits per second)
AUDIO_BITRATE=128000

# Database Configuration
# Turso DB (LibSQL) - Required for bot operation
# Get your database URL and auth token from: https://turso.tech/
# See docs/TURSO_SETUP.md for detailed setup instructions
TURSO_DATABASE_URL=libsql://your-database-name.turso.io
TURSO_AUTH_TOKEN=your_turso_auth_token_here

# Optional: Sync URL for embedded replicas (offline-first capabilities)
# TURSO_SYNC_URL=libsql://your-database-name.turso.io
# TURSO_SYNC_INTERVAL=60000

# Optional: Encryption key for additional security
# TURSO_ENCRYPTION_KEY=your_encryption_key_here

# Logging Configuration
LOG_LEVEL=info
LOG_PRETTY=true
LOG_FILE=./logs/bot.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=5

# Feature Flags (set to false to disable modules)
# Music: YouTube, Spotify, SoundCloud playback with queue management
FEATURE_MUSIC=true

# Moderation: Kick, ban, mute, warn, auto-moderation
FEATURE_MODERATION=true

# Economy: Currency, shop, gambling games
FEATURE_ECONOMY=true

# Leveling: XP system with rewards
FEATURE_LEVELING=true

# Tickets: Support ticket system
FEATURE_TICKETS=true

# Logging: Event logging and analytics
FEATURE_LOGGING=true

# Rate Limiting Configuration
RATE_LIMIT_DEFAULT=3000
RATE_LIMIT_PREMIUM=1000
RATE_LIMIT_BURST=5

# Economy Configuration
ECONOMY_STARTING_BALANCE=1000
ECONOMY_DAILY_REWARD=500
ECONOMY_WORK_MIN=100
ECONOMY_WORK_MAX=500
ECONOMY_TRANSFER_TAX=0.05

# Leveling Configuration
LEVELING_XP_MESSAGE_MIN=5
LEVELING_XP_MESSAGE_MAX=15
LEVELING_XP_VOICE=1
LEVELING_BASE=100
LEVELING_MULTIPLIER=1.5

# Bot Owner Configuration (for owner-only commands)
BOT_OWNER_ID=your_discord_user_id_here

# Server Configuration
# Environment: development, production, test
NODE_ENV=development

# Port for audio streaming server (must match AUDIO_SOURCE_PORT)
PORT=3000
HOST=0.0.0.0

# FFmpeg Configuration
# Path to ffmpeg binary (auto-detected if using ffmpeg-static)
FFMPEG_PATH=

# yt-dlp Configuration
# Path to yt-dlp binary (default: yt-dlp in PATH)
YTDLP_PATH=yt-dlp
# Timeout for yt-dlp operations in milliseconds (reduced to 30s for faster failures)
YTDLP_TIMEOUT=30000
# Audio format preference (251=Opus 160kbps, 140=AAC 128kbps, fallback to bestaudio)
# Format 251 provides best quality with smallest file size
YTDLP_AUDIO_FORMAT=251/140/bestaudio[ext=m4a]/bestaudio
# Socket timeout in seconds (faster connection timeout)
YTDLP_SOCKET_TIMEOUT=10
# Number of retries for extractor (reduced for faster failures)
YTDLP_EXTRACTOR_RETRIES=3

# Cache Configuration
# Enable/disable metadata caching
CACHE_ENABLED=true
# Cache time-to-live in milliseconds (10 minutes)
CACHE_TTL=600000
# Maximum number of cached entries
CACHE_MAX_SIZE=1000

# Rate Limiting Configuration (Server)
# Time window for rate limiting in milliseconds (1 minute)
RATE_LIMIT_WINDOW_MS=60000
# Maximum requests per window
RATE_LIMIT_MAX=100

# Timeout Configuration
# General request timeout in milliseconds (2 minutes)
REQUEST_TIMEOUT=120000
# Audio stream timeout in milliseconds (5 minutes)
STREAM_TIMEOUT=300000

# Logging Configuration (Server)
# Log level: debug, info, warn, error
LOG_LEVEL=info
# Log format: json or pretty
LOG_FORMAT=json
# Enable file logging
LOG_FILE_ENABLED=false
# Log file path
LOG_FILE_PATH=logs/server.log

# Security Configuration
# CORS allowed origins (* for all, or comma-separated list)
CORS_ORIGIN=*
# Enable CORS credentials
CORS_CREDENTIALS=true

# ============================================================================
# CONFIGURATION GUIDE
# ============================================================================
#
# MUSIC SYSTEM:
# - Requires audio streaming server running on AUDIO_SOURCE_PORT
# - Start server with: npm run server
# - Supports YouTube, Spotify, SoundCloud
# - Queue persistence enabled via DISCORD_CACHE_PATH
# - Volume range: 0-200% (default: 80%)
# - Maximum queue size: 100 tracks per guild
# - Maximum playlist size: 50 tracks
# - Maximum playlists per user: 10
#
# PERFORMANCE OPTIMIZATION:
# - Format 251 (Opus 160kbps): Best quality, smallest size, fastest download
# - Format 140 (AAC 128kbps): Good quality, widely compatible
# - Reduced timeout (30s) for faster error detection
# - Socket timeout (10s) prevents hanging connections
# - Limited retries (3) for faster failures
# - Metadata caching (10min TTL) reduces repeated requests
#
# AUDIO FILTERS:
# - bassboost: Boost bass frequencies
# - nightcore: Speed up and pitch up
# - vaporwave: Slow down and pitch down
# - 8d: 8D audio effect
# - karaoke: Reduce vocals
#
# PERMISSIONS:
# - Everyone: play, skip, resume, view queue
# - DJ role: pause, stop, volume, loop, filter, seek, remove, move, shuffle
# - Manage Channels: same as DJ role
#
# DATABASE:
# - Turso DB: Distributed SQLite with LibSQL (required for all environments)
# - See docs/TURSO_SETUP.md for setup instructions
# - Free tier available at https://turso.tech/
#
# LOGGING:
# - Logs stored in LOG_FILE path
# - Log rotation based on LOG_MAX_SIZE and LOG_MAX_FILES
# - Set LOG_PRETTY=true for human-readable logs in development
#
# RATE LIMITING:
# - Prevents command spam and abuse
# - RATE_LIMIT_DEFAULT: Cooldown in milliseconds
# - RATE_LIMIT_BURST: Maximum commands in burst window
#
# ============================================================================